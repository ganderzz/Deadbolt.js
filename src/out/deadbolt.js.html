<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: deadbolt.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: deadbolt.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var deadbolt = (function() {
    var queue = [];
    var validators = {
        email: function() {
            return new RegExp("(.+)@(.+)\.(.+)", "i");
        },
        minLength: function(what) {
            return new RegExp("^(.+){" + what + ",}$", "i");
        },
        not: function(what) {
            return new RegExp("^((?!" + what + ").)*$", "i");
        },
        digit: function() {
            return new RegExp("^[0-9,\-]+$", "i");
        }
    };

    function deadbolt(elem, options) {
        return new deadbolt.fn._init(elem, options);
    }

	/* Internal Functions */
	/* _init: Initializes deadbolt - loads in form elements with corresponding varifications. / Returns: OBJECT:(deadbolt) */
	/* _tester: Tests an element with its varifications to see if it passes. / Returns: BOOLEAN:(True / False) */
    deadbolt.fn = deadbolt.prototype = {
        /**
         * Initializes the deadbolt library. Loads in options, and creates a cache of the validation elements.
         * @constructor
         * @param {string} elem - The parent container of the inputs.
         * @param {object} options - The additional validator rules.
         * @return {object} deadbolt object
         */
        _init: function(elem, options) {
        	var qElem = document.querySelector(elem).querySelectorAll("[data-valid]");

        	// Check if any rules are passed into instantiation function. If so, add it to the global validators object.
            if(options !== undefined)
            {
                for(var key in options)
                    validators[key] = options[key];
            }

            // Search form for data-valid attributes, then create an array combining those rules with the DOM element
            for(var i = 0; i &lt; qElem.length; i++) {
                var validation = [],
                	tempElem = qElem[i], 
                	what = (tempElem.dataset.valid.indexOf(",") > 0)? tempElem.dataset.valid.split(",") : [tempElem.dataset.valid];

                // Check all rules on a DOM element. 
                // If they match rules defined in the global validators, add the corresponding RegExp function to local validation array
                for (var t = 0; t &lt; what.length; t++) {
                    for (var key in validators) {
                        if (what[t].match(new RegExp(key, "i")))
                            validation.push(validators[key](what[t].split("=")[1]));
                    }
                }
                queue.push(new Array(tempElem, validation, false));
            }

            return deadbolt;
        },
        /**
         * Uses the validation rules of an input, and checks if it passes or fails.
         * @function
         * @param {array} input - The queue element of an input
         * @return {boolean} true if passes, false if fails.
         */
        _tester: function(input) {
        	var what = input[0], validator = input[1], hasError = input[2];

            for (var i = 0; i &lt; validator.length; i++) {
                if (!validator[i].test(what.value)) {
                    hasError = true;

                    return false;
                }
                hasError = false;
            }

            return true;
        }
    };

	/* External Functions */
	/* isValid: Checks if all the queued elements match their rules, if so return true or false. / Returns: BOOLEAN(True / False) */
    deadbolt.isValid = deadbolt.prototype = function() {
        var tempBool = true;
        for (var i = 0; i &lt; queue.length; i++) {
            if (deadbolt.fn._tester(queue[i]) === false)
                tempBool = false;
        }

        return tempBool;
    }

    return deadbolt;
})();
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="-_anonymous_-deadbolt__init.html">_init</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.3</a> on Sat Oct 17 2015 10:36:42 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
